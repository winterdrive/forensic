# ğŸ“Š 2025 è³‡æ–™ç§‘å­¸çµ„ç«¶è³½ - åˆ†é¡å™¨è¨“ç·´æ–¹æ³•èªªæ˜

## ğŸ¯ å°ˆæ¡ˆæ¦‚è¿°

æœ¬å°ˆæ¡ˆé‡å° 2025 è³‡æ–™ç§‘å­¸çµ„ç«¶è³½é–‹ç™¼äº†ä¸€å¥—æ··åˆå¼åˆ†é¡ç³»çµ±ï¼Œç”¨æ–¼åˆ¤æ–·ç°¡è¨Šæ˜¯å¦ï¼š

1. **å±¬æ–¼ã€Œæ—…éŠè¡Œç¨‹èˆ‡æœå‹™é€šçŸ¥ã€é¡åˆ¥** â†’ `label = 1`
2. **å«æœ‰ä¸­æ–‡å§“å** â†’ `name_flg = 1`

æˆ‘å€‘æ¡ç”¨äº† **LLM æ¨™è¨» + BERT è¨“ç·´** çš„æ··åˆç­–ç•¥ï¼Œçµåˆå¤šå€‹æ¨¡å‹çš„å„ªå‹¢ä¾†æå‡åˆ†é¡æº–ç¢ºåº¦ã€‚

---

## ğŸ—ï¸ æ•´é«”æ¶æ§‹

### ğŸ“Š æ•¸æ“šæµç¨‹åœ–

```text
åŸå§‹æ•¸æ“š (200,000+ SMS)
      â†“
[LLM æ¨™è¨»éšæ®µ] - ä½¿ç”¨å¤šå€‹LLMé€²è¡Œåˆæ­¥åˆ†é¡
      â†“
[äººå·¥æ ¡é©—] - è™•ç†æ¨¡å‹é–“æ­§ç•°ï¼Œç¢ºä¿æ¨™è¨»å“è³ª
      â†“
[æ•¸æ“šæ•´åˆ] - æ•´åˆç‚º 8,000 ç­†é«˜å“è³ªè¨“ç·´æ•¸æ“š
      â†“
[BERT è¨“ç·´] - è¨“ç·´å¤šå€‹BERTè®Šé«”æ¨¡å‹
      â†“
[æ¨¡å‹èåˆ] - æŠ•ç¥¨æ±ºç­–èˆ‡æ­§ç•°æª¢æ¸¬
      â†“
æœ€çµ‚é æ¸¬çµæœ
```

---

## ğŸ“ è³‡æ–™æ¨™è¨»æµç¨‹

### ç¬¬ä¸€éšæ®µï¼šLLM å¤šæ¨¡å‹æ¨™è¨»

æˆ‘å€‘é¸ç”¨äº†è¡¨ç¾å„ªç•°çš„ä¸‰å€‹ LLM æ¨¡å‹é€²è¡Œåˆæ­¥æ¨™è¨»ï¼š

#### ğŸ¤– ä½¿ç”¨çš„ LLM æ¨¡å‹

- **Gemini 2.5 Flash** (Google)
- **Llama-3.3-70B-Instruct** (Meta)
- **DeepSeek-R1-Distill-Llama-70B** (DeepSeek)
- **Magistral-Small-2506** (Mistral AI)

#### ğŸ“‹ æ¨™è¨»ç­–ç•¥

1. **çµæ§‹åŒ–æç¤ºè©è¨­è¨ˆ**ï¼š
   - å§“ååˆ†é¡ï¼šæ˜ç¢ºå®šç¾©ä¸­æ–‡å§“åçš„è­˜åˆ¥è¦å‰‡ï¼ŒåŒ…å«æ¨™æº–å§“åã€æš±ç¨±å°åã€ç¨±è¬‚ç”¨æ³•ç­‰
   - æ—…éŠåˆ†é¡ï¼šèšç„¦æ–¼æ—…éŠè¡Œç¨‹é€šçŸ¥ã€æ—…è¡Œç¤¾ç™¼é€ã€ç›¸é—œé—œéµå­—ç­‰åˆ¤æ–·ä¾æ“š

2. **XML æ ¼å¼åŒ–è¼¸å…¥**ï¼š
   - ä½¿ç”¨ XML çµæ§‹åŒ–è¼¸å…¥ç°¡è¨Šå…§å®¹ï¼Œæå‡ LLM è§£ææº–ç¢ºåº¦
   - å¯¦ä½œ XML è½‰ç¾©è™•ç†ï¼Œé¿å…ç‰¹æ®Šå­—å…ƒå½±éŸ¿è§£æ

3. **æ‰¹æ¬¡è™•ç†å„ªåŒ–**ï¼š
   - æ¯æ¬¡è™•ç† 20-50 å‰‡ç°¡è¨Šï¼Œå¹³è¡¡æ•ˆç‡èˆ‡æº–ç¢ºåº¦
   - å¯¦ä½œ token æ•¸é‡ä¼°ç®—ï¼Œæ§åˆ¶ API å‘¼å«æˆæœ¬

### ç¬¬äºŒéšæ®µï¼šäººå·¥æ ¡é©—èˆ‡å“è³ªæ§åˆ¶

#### ğŸ” æ­§ç•°æª¢æ¸¬æ©Ÿåˆ¶

- **ä¸‰æ¨¡å‹æŠ•ç¥¨åˆ¶**ï¼šç•¶ä»»ä¸€æ¨¡å‹é æ¸¬çµæœèˆ‡å…¶ä»–ä¸åŒæ™‚ï¼Œæ¨™è¨˜ç‚ºéœ€äººå·¥æª¢æŸ¥
- **å…±è­˜æ±ºç­–**ï¼šåªæœ‰ç•¶æ¨¡å‹é–“é”æˆå…±è­˜çš„é æ¸¬æ‰è‡ªå‹•æ¡ç´
- **åˆ†æ­§è™•ç†**ï¼šæ‰€æœ‰åˆ†æ­§æ¡ˆä¾‹éƒ½ç¶“éäººå·¥é€ä¸€æª¢è¦–å’Œæ¨™è¨»

#### ğŸ“Š å“è³ªæª¢æŸ¥æµç¨‹

1. **mismatch è­˜åˆ¥**ï¼šä½¿ç”¨ `majority_vote.py` è…³æœ¬è‡ªå‹•è­˜åˆ¥æ¨¡å‹é–“åˆ†æ­§
2. **Google Sheets å”ä½œ**ï¼šå»ºç«‹ç·šä¸Šè¡¨å–®ä¾›åœ˜éšŠæˆå“¡å”ä½œæ¨™è¨»
3. **äº¤å‰é©—è­‰**ï¼šé‡è¦æ¡ˆä¾‹ç”±å¤šäººç¨ç«‹æ¨™è¨»å¾Œè¨è«–ç¢ºèª

### ç¬¬ä¸‰éšæ®µï¼šæ•¸æ“šé›†æ§‹å»º

#### ğŸ“š è¨“ç·´æ•¸æ“šä¾†æº

æœ€çµ‚çš„è¨“ç·´é›† (`train_8000.csv`) æ•´åˆäº†ä»¥ä¸‹æ•¸æ“šæºï¼š

1. **å®˜æ–¹æä¾›æ•¸æ“š** (1,000 ç­†)ï¼š
   - `both_6_offical.csv` - 6 ç­†
   - `name_1000_offical.csv` - 994 ç­†å§“åæ¨™è¨»
   - `travel_1000_offical.csv` - 994 ç­†æ—…éŠæ¨™è¨»

2. **ç¬¬ä¸€è¼ªäººå·¥æ¨™è¨»** (3,000 ç­†)ï¼š
   - `raw_3000_labeled.csv` - ç¶“éå¤š LLM æŠ•ç¥¨å’Œäººå·¥æ ¡é©—

3. **æ“´å……æ¨™è¨»æ•¸æ“š** (4,000 ç­†)ï¼š
   - `name_consensus.csv` / `travel_consensus.csv` - é¡å¤–æ“´å……çš„é«˜å“è³ªæ¨™è¨»

#### ğŸ”§ æ•¸æ“šé è™•ç† (`train_8000.py`)

1. **ID æ¨™æº–åŒ–**ï¼šæ’åºã€å»é‡ã€å»é™¤ç©ºå€¼
2. **æ¨™ç±¤æ•´åˆ**ï¼šåˆä½µä¾†è‡ªä¸åŒä¾†æºçš„æ¨™è¨»çµæœ
3. **å“è³ªé©—è­‰**ï¼šç¢ºä¿æ‰€æœ‰æ¨™ç±¤ç‚º 0/1 äºŒå…ƒå€¼ï¼Œç„¡ç¼ºå¤±å€¼
4. **æ•¸æ“šåˆ†å‰²**ï¼šæŒ‰ 8:1:1 æ¯”ä¾‹åˆ†å‰²ç‚ºè¨“ç·´/é©—è­‰/æ¸¬è©¦é›†

---

## ğŸ¤– BERT æ¨¡å‹è¨“ç·´

### æ¨¡å‹é¸æ“‡ç­–ç•¥

æˆ‘å€‘è¨“ç·´äº†å¤šå€‹ BERT è®Šé«”ï¼Œé‡å°ä¸­æ–‡æ–‡æœ¬ç‰¹æ€§é€²è¡Œå„ªåŒ–ï¼š

#### ğŸ† ä¸»è¦æ¨¡å‹æ¶æ§‹

1. **distilbert-base-multilingual-cased**
   - å¤šèªè¨€æ”¯æŒï¼Œé©åˆè™•ç†ä¸­è‹±æ··åˆç°¡è¨Š
   - è¼•é‡åŒ–è¨­è¨ˆï¼Œæ¨è«–é€Ÿåº¦å¿«
   - é…ç½®ï¼šå­¸ç¿’ç‡ 2e-5ï¼Œæ‰¹æ¬¡å¤§å° 16

2. **hfl/chinese-macbert-large**
   - å°ˆç‚ºä¸­æ–‡è¨­è¨ˆçš„å¤§å‹æ¨¡å‹
   - æ›´å¼·çš„ä¸­æ–‡èªç¾©ç†è§£èƒ½åŠ›
   - é…ç½®ï¼šå­¸ç¿’ç‡ 1e-5ï¼Œæ‰¹æ¬¡å¤§å° 8ï¼ˆè¨˜æ†¶é«”é™åˆ¶ï¼‰

3. **ckiplab/bert-base-chinese**
   - ä¸­ç ”é™¢é–‹ç™¼çš„ä¸­æ–‡ BERT
   - åœ¨ä¸­æ–‡ä»»å‹™ä¸Šè¡¨ç¾å„ªç•°
   - å¹³è¡¡æ•ˆèƒ½èˆ‡æº–ç¢ºåº¦

### ğŸ› ï¸ è¨“ç·´é…ç½®

#### å…±åŒè¨“ç·´åƒæ•¸

```ini
max_length = 512          # æœ€å¤§åºåˆ—é•·åº¦
num_epochs = 5            # è¨“ç·´è¼ªæ•¸
warmup_steps = 500        # é ç†±æ­¥æ•¸
weight_decay = 0.01       # æ¬Šé‡è¡°æ¸›
early_stopping_patience = 3  # æ—©åœæ©Ÿåˆ¶
random_seed = 42          # éš¨æ©Ÿç¨®å­
```

#### åˆ†åˆ¥è¨“ç·´ç­–ç•¥

- **å§“ååˆ†é¡å™¨** (`bert_name_trainer.py`)ï¼šå°ˆæ³¨æ–¼è­˜åˆ¥ä¸­æ–‡å§“åæ¨¡å¼
- **æ—…éŠåˆ†é¡å™¨** (`bert_travel_trainer.py`)ï¼šå°ˆæ³¨æ–¼æ—…éŠç›¸é—œèªç¾©ç†è§£

### ğŸ“Š è¨“ç·´ç›£æ§

#### Weights & Biases æ•´åˆ

- å¯¦æ™‚ç›£æ§è¨“ç·´ loss å’Œé©—è­‰æº–ç¢ºç‡
- è‡ªå‹•ä¿å­˜æœ€ä½³æ¨¡å‹æ¬Šé‡
- è¨“ç·´éç¨‹å¯è¦–åŒ–å’Œåˆ†æ

#### è©•ä¼°æŒ‡æ¨™

- **æº–ç¢ºç‡ (Accuracy)**
- **ç²¾ç¢ºç‡ (Precision)**
- **å¬å›ç‡ (Recall)**
- **F1 Score**
- **AUC-ROC**

---

## ğŸ”„ æ¨è«–èˆ‡èåˆç­–ç•¥

### å¤šæ¨¡å‹æ¨è«–

#### LLM æ¨è«– (`llm_*_classifier.py`)

- çµæ§‹åŒ– XML è¼¸å…¥è™•ç†
- æ‰¹æ¬¡æ¨è«–å„ªåŒ–
- API å¤±æ•—é‡è©¦æ©Ÿåˆ¶
- çµæœæ ¼å¼æ¨™æº–åŒ–

#### BERT æ¨è«– (`bert_*_inference.py`)

- GPU åŠ é€Ÿæ¨è«–
- æ‰¹æ¬¡è™•ç†å„ªåŒ–
- æ©Ÿç‡è¼¸å‡ºèˆ‡é–¾å€¼èª¿æ•´
- æ¨¡å‹æ¬Šé‡è‡ªå‹•è¼‰å…¥

### ğŸ—³ï¸ æŠ•ç¥¨èåˆæ©Ÿåˆ¶

#### å…±è­˜æ±ºç­– (`majority_vote.py`)

1. **å¤šæ¨¡å‹é æ¸¬æ•´åˆ**ï¼šæ”¶é›†æ‰€æœ‰æ¨¡å‹çš„é æ¸¬çµæœ
2. **æ­§ç•°æª¢æ¸¬**ï¼šæ¨™è¨˜æ¨¡å‹é–“é æ¸¬ä¸ä¸€è‡´çš„æ¡ˆä¾‹
3. **äººå·¥ä»‹å…¥**ï¼šå°æ­§ç•°æ¡ˆä¾‹é€²è¡Œäººå·¥å¯©æŸ¥å’Œä¿®æ­£
4. **æœ€çµ‚æ±ºç­–**ï¼šçµåˆæ¨¡å‹å…±è­˜å’Œäººå·¥æ ¡æ­£çš„æœ€çµ‚çµæœ

#### ä¸Šå‚³ç­–ç•¥

- **ç¬¬ä¸€æ¬¡ä¸Šå‚³**ï¼šä½¿ç”¨ train_8000 è¨“ç·´çš„æ¨¡å‹çµæœ
- **å¾ŒçºŒä¸Šå‚³**ï¼š
  - æ·»åŠ  train_9000 æ“´å……æ•¸æ“šè¨“ç·´çš„æ¨¡å‹
  - åŠ å…¥ MacBERT Large å¢å¼·é æ¸¬èƒ½åŠ›
  - æ ¹æ“šæ’åè®ŠåŒ–å‹•æ…‹èª¿æ•´ç­–ç•¥

---

## ğŸ“ˆ å¯¦é©—çµæœèˆ‡å„ªåŒ–

### æ¨¡å‹è¡¨ç¾å°æ¯”

åŸºæ–¼æœƒè­°è¨˜éŒ„å’Œå¯¦é©—çµæœï¼š

#### è¨“ç·´æ•¸æ“šè¿­ä»£

- **train_8000**ï¼šåˆç‰ˆè¨“ç·´é›†ï¼Œå»ºç«‹åŸºæº–è¡¨ç¾
- **train_9000**ï¼šåŠ å…¥ mismatch é‡æ–°æ¨™è¨»æ•¸æ“šï¼Œæå‡æ¨¡å‹ç©©å¥æ€§

#### æ¨¡å‹è©•ä¼°çµæœ

- **å§“ååˆ†é¡**ï¼šç›®æ¨™æº–ç¢ºç‡ >98%ï¼Œå¦‚æœªé”æ¨™è€ƒæ…® NER æ¨¡å‹
- **æ—…éŠåˆ†é¡**ï¼šé€šéå¤šè¼ªæ¸¬è©¦å’Œäººå·¥é©—è­‰å„ªåŒ–

### ğŸ”§ æŒçºŒå„ªåŒ–ç­–ç•¥

1. **æ­§ç•°è™•ç†**ï¼š
   - é è³½ï¼šæª¢æŸ¥æ‰€æœ‰ mismatch æ¡ˆä¾‹
   - æ­£è³½ï¼šå°è¶…é 30,000 ç­†çš„é æ¸¬é€²è¡Œ mismatch æª¢æŸ¥å’Œäººå·¥ä¿®æ­£

2. **æ•¸æ“šæ¸…ç†**ï¼š
   - å§“ååˆ†é¡ï¼šéæ¿¾æ‰æ‰€æœ‰ â—‹ å’Œ ï¼Š ç¬¦è™Ÿ
   - ç¢ºä¿æœ€çµ‚ä¸Šå‚³æ•¸æ“šä¸è¶…é 30,000 ç­†é™åˆ¶

3. **æ¨¡å‹é¸æ“‡**ï¼š
   - æ ¹æ“šé©—è­‰çµæœå‹•æ…‹é¸æ“‡æœ€ä½³æ¨¡å‹çµ„åˆ
   - ä¿æŒå¤šå€‹å‚™é¸æ–¹æ¡ˆæ‡‰å°ä¸åŒæ¸¬è©¦å ´æ™¯

---

## ğŸ› ï¸ æŠ€è¡“å¯¦ç¾ç´°ç¯€

### æ ¸å¿ƒæ¨¡çµ„æ¶æ§‹

#### æ•¸æ“šè™•ç†æ¨¡çµ„ (`src/pretreat/`)

- `train_8000.py`ï¼šæ•¸æ“šé›†æ§‹å»ºèˆ‡æ¨™æº–åŒ–
- `majority_vote.py`ï¼šå¤šæ¨¡å‹æŠ•ç¥¨èˆ‡å…±è­˜æ±ºç­–
- `llm_compare.py`ï¼šLLM æ¨¡å‹æ•ˆèƒ½æ¯”è¼ƒ

#### æ¨¡å‹è¨“ç·´æ¨¡çµ„ (`src/bert_model/`)

- `bert_*_trainer.py`ï¼šBERT æ¨¡å‹è¨“ç·´è…³æœ¬
- `bert_*_inference.py`ï¼šæ¨è«–åŸ·è¡Œè…³æœ¬
- `config*.ini`ï¼šæ¨¡å‹é…ç½®æª”æ¡ˆ

#### LLM åˆ†é¡æ¨¡çµ„ (`src/`)

- `llm_name_classifier.py`ï¼šLLM å§“ååˆ†é¡å™¨
- `llm_travel_classifier.py`ï¼šLLM æ—…éŠåˆ†é¡å™¨
- `utils.py`ï¼šå…±ç”¨å·¥å…·å‡½æ•¸

### ğŸ”§ å·¥ç¨‹åŒ–ç‰¹æ€§

1. **æ¨¡çµ„åŒ–è¨­è¨ˆ**ï¼šå„åŠŸèƒ½ç¨ç«‹å°è£ï¼Œä¾¿æ–¼ç¶­è­·å’Œæ¸¬è©¦
2. **é…ç½®é©…å‹•**ï¼šä½¿ç”¨ INI æª”æ¡ˆç®¡ç†æ¨¡å‹åƒæ•¸å’Œè·¯å¾‘
3. **éŒ¯èª¤è™•ç†**ï¼šå®Œæ•´çš„ç•°å¸¸è™•ç†å’Œé‡è©¦æ©Ÿåˆ¶
4. **æ—¥èªŒè¨˜éŒ„**ï¼šè©³ç´°çš„è¨“ç·´å’Œæ¨è«–éç¨‹è¨˜éŒ„
5. **ç‰ˆæœ¬æ§åˆ¶**ï¼šæ¨¡å‹æ¬Šé‡å’Œçµæœæª”æ¡ˆè‡ªå‹•ç‰ˆæœ¬æ¨™è¨˜

---

## ğŸš€ éƒ¨ç½²èˆ‡ä½¿ç”¨

### ç’°å¢ƒéœ€æ±‚

```bash
# æ ¸å¿ƒä¾è³´
torch >= 1.9.0
transformers >= 4.20.0
pandas >= 1.3.0
scikit-learn >= 1.0.0

# å¯é¸ä¾è³´
wandb  # è¨“ç·´ç›£æ§
openai  # LLM API èª¿ç”¨
requests  # HTTP è«‹æ±‚è™•ç†
```

### å¿«é€Ÿé–‹å§‹

1. **ç’°å¢ƒè¨­ç½®**ï¼š

   ```bash
   pip install -r requirements_bert.txt
   ```

2. **æ¨¡å‹è¨“ç·´**ï¼š

   ```bash
   # è¨“ç·´å§“ååˆ†é¡å™¨
   python src/bert_model/bert_name_trainer.py
   
   # è¨“ç·´æ—…éŠåˆ†é¡å™¨
   python src/bert_model/bert_travel_trainer.py
   ```

3. **æ¨¡å‹æ¨è«–**ï¼š

   ```bash
   # BERT æ¨è«–
   python src/bert_model/run_inference_simple.py
   
   # LLM æ¨è«–
   python src/llm_name_classifier.py
   ```

4. **çµæœèåˆ**ï¼š

   ```bash
   python src/pretreat/majority_vote.py --input_dir results/
   ```

---

